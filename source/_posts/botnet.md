---
title: 僵尸网络
date: 2018-08-07 22:24:14
tags:
---
此文是学习的一些自我总结

### 僵尸网络
僵尸网络是由众多肉鸡和网络控制者组成，网络控制者通过传播木马,漏洞利用等途径抓肉鸡，并通过命令服务器控制整个网络.

### 传播方法
#### 弱口令
最简单（辣鸡）的方法就是通过服务器弱口令，使用一些类似nmap，zmap全网扫描 再使用一些爆破工具 如Hydra. 操作简单，但是成功率非常小.
\*随着物联网的发展 用户对物联网设备的疏忽大意 导致现在出现了大量IoT僵尸网络

#### 传播木马
一些下载站捆绑的软件就是木马 下载完就变成肉鸡了.或者提供一些类似于黑客工具 用捆绑木马骗小白们下载. 这种方式操作复制 因为让别人下载并运行也不是一件容易的事，但是如果免杀做得好 成功率基本100%

#### 远程攻击
通过收集一些rce exp 在全网搜索引擎找到合适目标 进行攻击。操作也简单，成功率很高.但是能成功的数量可能不多，还是万人骑


### 获取命令渠道
 IPC->HTTP/DNS->社交网络

IPC 通过IPC频道下发命令
HTTP/DNS 通过http请求/dns请求来下发命令
社交网络  通过qq空间/推特推文之类下发命令

可以发现是越来越隐蔽的 防火墙从屏蔽IPC到屏蔽域名/ip 但一般不可能把推特/qq也给屏蔽掉

### 僵尸网络的攻与防
打击僵尸网络从僵尸网络诞生就没停止过，僵尸网络技术与检测技术都是不断发展

#### 终端攻防
安全软件/服务供应商(如云供应商)可以将木马检测删除.

但成熟的木马都做了随时代发展的混淆/免杀 难以查杀 以及用户安全意识不强 点信任此软件导致防御失败

#### 下发命令渠道
通过防火墙将检测出来的僵尸网络请求拦截，传统方法是通过人工定的规则.随着机器学习的技术的发展 通过机器/深度学习来检测僵尸网络的技术发展了起来 但是并没有有足以商用的，因为网络请求0.1误报率就足以让人不去使用 但可以期待以后通过机器/深度学习将僵尸网络通信拦截.

获取命令渠道一直在发展 像通过社交网络的渠道去获得命令 防火墙完全不可能查出来


#### 命令服务器
通过向IP提供商/云服务器供应商/域名供应商投诉 使命令服务器关闭 破坏僵尸网络

> 僵尸网络的命令服务器网络结构发展
  中心化(单命令服务器)->中心化(多命令服务器)->星形(多命令服务器,分别负责一部分)=网状(p2p 无命令服务器 bot之间平权)
  逐渐不再中心化 减轻了命令服务器被破坏导致僵尸网络的破坏

> fast flux
传统上通过使用循环dns (为单个域名 返回多ip)并频繁更换dns记录的ip地址  可以隐藏背后真实的ip地址 就算被发现了并封停 也通过更换dns记录的ip保持僵尸网络。 缺点显然是需要域名不被封停，因为注册服务商不愿意这样做  可能因为是他们的主要客户并且所在地区无法律要求封停

> DGA
通过使用一些随机种子和域名生成算法(DGA)生成大量域名 并作为命令服务器。 作者提前注册。由于生成的大量域名难以全加到防火墙规则和封停和购买域名成本并不高 是一种有效防止封停命令服务器的方法。但使用机器学习检测DGA已经逐渐成熟，将来很可能会被防火墙拦截.
如果作者没有全部注册 可能导致抢注域名 （需要逆向分析出dga算法和服务器端算法）

> 社交网络
在社交网络 举报成功或者联系客服都能使得账号被封停。 在前沿领域已经有人使用了类似与DGA的用户生成算法


#### 作者
虽然几率比较小 但是还是有的 [史上最强僵尸网络 Mirai 真凶被抓](https://www.leiphone.com/news/201712/Zh27v3v2MggYZNul.html)
